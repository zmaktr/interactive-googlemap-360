const mapStyle = [
  {
      "featureType": "all",
      "elementType": "all",
      "stylers": [
          {
              "visibility": "on"
          }
      ]
  },
  {
      "featureType": "all",
      "elementType": "labels",
      "stylers": [
          {
              "visibility": "off"
          },
          {
              "saturation": "-100"
          }
      ]
  },
  {
      "featureType": "all",
      "elementType": "labels.text.fill",
      "stylers": [
          {
              "saturation": 36
          },
          {
              "color": "#000000"
          },
          {
              "lightness": 40
          },
          {
              "visibility": "off"
          }
      ]
  },
  {
      "featureType": "all",
      "elementType": "labels.text.stroke",
      "stylers": [
          {
              "visibility": "off"
          },
          {
              "color": "#000000"
          },
          {
              "lightness": 16
          }
      ]
  },
  {
      "featureType": "all",
      "elementType": "labels.icon",
      "stylers": [
          {
              "visibility": "off"
          }
      ]
  },
  {
      "featureType": "administrative",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#000000"
          },
          {
              "lightness": 20
          }
      ]
  },
  {
      "featureType": "administrative",
      "elementType": "geometry.stroke",
      "stylers": [
          {
              "color": "#000000"
          },
          {
              "lightness": 17
          },
          {
              "weight": 1.2
          }
      ]
  },
  {
      "featureType": "landscape",
      "elementType": "geometry",
      "stylers": [
          {
              "color": "#000000"
          },
          {
              "lightness": 20
          }
      ]
  },
  {
      "featureType": "landscape",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#4d6059"
          }
      ]
  },
  {
      "featureType": "landscape",
      "elementType": "geometry.stroke",
      "stylers": [
          {
              "color": "#4d6059"
          }
      ]
  },
  {
      "featureType": "landscape.natural",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#4d6059"
          }
      ]
  },
  {
      "featureType": "poi",
      "elementType": "geometry",
      "stylers": [
          {
              "lightness": 21
          }
      ]
  },
  {
      "featureType": "poi",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#4d6059"
          }
      ]
  },
  {
      "featureType": "poi",
      "elementType": "geometry.stroke",
      "stylers": [
          {
              "color": "#4d6059"
          }
      ]
  },
  {
      "featureType": "road",
      "elementType": "geometry",
      "stylers": [
          {
              "visibility": "on"
          },
          {
              "color": "#7f8d89"
          }
      ]
  },
  {
      "featureType": "road",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#7f8d89"
          }
      ]
  },
  {
      "featureType": "road.highway",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#7f8d89"
          },
          {
              "lightness": 17
          }
      ]
  },
  {
      "featureType": "road.highway",
      "elementType": "geometry.stroke",
      "stylers": [
          {
              "color": "#7f8d89"
          },
          {
              "lightness": 29
          },
          {
              "weight": 0.2
          }
      ]
  },
  {
      "featureType": "road.arterial",
      "elementType": "geometry",
      "stylers": [
          {
              "color": "#000000"
          },
          {
              "lightness": 18
          }
      ]
  },
  {
      "featureType": "road.arterial",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#7f8d89"
          }
      ]
  },
  {
      "featureType": "road.arterial",
      "elementType": "geometry.stroke",
      "stylers": [
          {
              "color": "#7f8d89"
          }
      ]
  },
  {
      "featureType": "road.local",
      "elementType": "geometry",
      "stylers": [
          {
              "color": "#000000"
          },
          {
              "lightness": 16
          }
      ]
  },
  {
      "featureType": "road.local",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#7f8d89"
          }
      ]
  },
  {
      "featureType": "road.local",
      "elementType": "geometry.stroke",
      "stylers": [
          {
              "color": "#7f8d89"
          }
      ]
  },
  {
      "featureType": "transit",
      "elementType": "geometry",
      "stylers": [
          {
              "color": "#000000"
          },
          {
              "lightness": 19
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "all",
      "stylers": [
          {
              "color": "#2b3638"
          },
          {
              "visibility": "on"
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "geometry",
      "stylers": [
          {
              "color": "#2b3638"
          },
          {
              "lightness": 17
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "geometry.fill",
      "stylers": [
          {
              "color": "#24282b"
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "geometry.stroke",
      "stylers": [
          {
              "color": "#24282b"
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "labels",
      "stylers": [
          {
              "visibility": "off"
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "labels.text",
      "stylers": [
          {
              "visibility": "off"
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "labels.text.fill",
      "stylers": [
          {
              "visibility": "off"
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "labels.text.stroke",
      "stylers": [
          {
              "visibility": "off"
          }
      ]
  },
  {
      "featureType": "water",
      "elementType": "labels.icon",
      "stylers": [
          {
              "visibility": "off"
          }
      ]
  }
]

function CenterControl(controlDiv, map) {

  controlDiv.style.marginLeft = '10vh';
  controlDiv.style.marginTop = "5vh";
  
  const controlUI = document.createElement("div");
  controlUI.style.backgroundColor = "#133a3b";
  controlUI.style.border = "1px solid #c7bc84";
  controlUI.style.width = '33vh';
  controlUI.style.borderRadius = "3px";
  controlUI.style.boxShadow = "0 2px 6px rgba(0,0,0,.3)";
  controlUI.style.textAlign = "center";
  controlUI.style.opacity = '0.94'
  controlUI.title = "Map Canvas";
  controlDiv.appendChild(controlUI);

  const canvasHeader = document.createElement("div");
  canvasHeader.style.backgroundColor = "#123738";
  canvasHeader.style.color = "#fff";
  canvasHeader.style.fontSize = "32px";
  canvasHeader.innerHTML = "<div align='center'><img src='img/360 logo.png' width='190' height='140'> </div>";
  controlUI.appendChild(canvasHeader);

  const buttonCurata = document.createElement("div");
  buttonCurata.style.backgroundColor = "#1f4e4f";
  buttonCurata.style.color = "#c9dcdd";
  buttonCurata.style.fontSize = "32px";
  buttonCurata.style.height = "5vh";
  buttonCurata.style.cursor = "pointer";
  buttonCurata.title = "Curata";
  buttonCurata.innerHTML = "<div align='left' onClick='handelRequests('\rainfall\')'><img  width='' height=''> Curata </div> ";
  controlUI.appendChild(buttonCurata);

  const buttonStaytoo = document.createElement("div");
  buttonStaytoo.style.backgroundColor = "#2d6566";
  buttonStaytoo.style.color = "#c9dcdd";
  buttonStaytoo.style.fontSize = "32px";
  buttonStaytoo.style.height = "5vh";
  buttonStaytoo.style.cursor = "pointer";
  buttonStaytoo.title = "StayToo";
  buttonStaytoo.innerHTML = "<div align='left'><img  width='' height=''> StayToo </div> ";
  controlUI.appendChild(buttonStaytoo);
  
  const buttonSquareville = document.createElement("div");
  buttonSquareville.style.backgroundColor = "#40797a";
  buttonSquareville.style.color = "#c9dcdd";
  buttonSquareville.style.fontSize = "32px";
  buttonSquareville.style.height = "5vh";
  buttonSquareville.style.cursor = "pointer";
  buttonSquareville.title = "SquareVille";
  buttonSquareville.innerHTML = "<div align='left'><img  width='' height=''> SquareVille </div> ";
  controlUI.appendChild(buttonSquareville);

  const buttonStayurban = document.createElement("div");
  buttonStayurban.style.backgroundColor = "#589293";
  buttonStayurban.style.color = "#c9dcdd";
  buttonStayurban.style.fontSize = "32px";
  buttonStayurban.style.height = "5vh";
  buttonStayurban.style.cursor = "pointer";
  buttonStayurban.title = "Stay Urban";
  buttonStayurban.innerHTML = "<div align='left'><img  width='' height=''> Stay Urban </div> ";
  controlUI.appendChild(buttonStayurban);

  const buttonTibadocare = document.createElement("div");
  buttonTibadocare.style.backgroundColor = "#70a7a8";
  buttonTibadocare.style.color = "#c9dcdd";
  buttonTibadocare.style.fontSize = "32px";
  buttonTibadocare.style.height = "5vh";
  buttonTibadocare.style.cursor = "pointer";
  buttonTibadocare.title = "Tibado Care";
  buttonTibadocare.innerHTML = "<div align='left'><img  width='' height=''> Tibado Care </div> ";
  controlUI.appendChild(buttonTibadocare);
  
  const buttonPentahotels = document.createElement("div");
  buttonPentahotels.style.backgroundColor = "#89b9ba";
  buttonPentahotels.style.color = "#c9dcdd";
  buttonPentahotels.style.fontSize = "32px";
  buttonPentahotels.style.height = "5vh";
  buttonPentahotels.style.cursor = "pointer";
  buttonPentahotels.title = "Penta Hotels";
  buttonPentahotels.innerHTML = "<div align='left'><img  width='' height=''> Penta Hotels </div> ";
  controlUI.appendChild(buttonPentahotels);
};

function initMap() {
  // Map options.
  const myOptions = {
    zoom: 7,
    center: {lat: 52.632469, lng: -1.689423},
    // styles: mapStyle,
    mapTypeControl: false,
    streetViewControl: false,
    fullscreenControl: true,
    fullscreenControlOptions: {
      position: google.maps.ControlPosition.RIGHT_BOTTOM,
    },
    zoomControl: true,
    zoomControlOptions: {
      position: google.maps.ControlPosition.RIGHT_TOP,
    },
  }
  // Create the map.
  const map = new google.maps.Map(document.getElementById('map'), myOptions); 

///////////////////

  var controlDiv = document.createElement('div');
  var mapControlPanel = new CenterControl(controlDiv, map)

  map.controls[google.maps.ControlPosition.TOP_LEFT].push(controlDiv);
////////////////////////////////  




  // Load the stores GeoJSON onto the map.
  map.data.loadGeoJson('locations.json', {idPropertyName: 'assetid'});

  // Define the custom marker icons, using the store's "category".
  map.data.setStyle((feature) => {
    return {
      icon: {
        url: `img/icon_${feature.getProperty('category')}.png`,
        scaledSize: new google.maps.Size(45, 35),
      },
    };
  });

  const apiKey = 'YOUR_API_KEY';
  const infoWindow = new google.maps.InfoWindow();
  // Show the information for a store when its marker is clicked.
  map.data.addListener('click', (event) => {
    const category = event.feature.getProperty('category');
    const name = event.feature.getProperty('address');
    const description = event.feature.getProperty('city');
    const email = event.feature.getProperty('email');
    const phone = event.feature.getProperty('phone');
    const position = event.feature.getGeometry().get();
    const content = `
    <img style="float:left; width:200px; margin-top:30px" src="img/icon_${category}.png">
    <div style="margin-left:220px; margin-bottom:20px;">
      <h2>${name}</h2><p>${description}</p>
      <p><b>Open:</b> ${email}<br/><b>Phone:</b> ${phone}</p>
      <p><img src="https://maps.googleapis.com/maps/api/streetview?location=${position.lat()},${position.lng()}&size=350x120&key=${apiKey}"></p>
    </div>
    `;

    infoWindow.setContent(content);
    infoWindow.setPosition(position);
    infoWindow.setOptions({pixelOffset: new google.maps.Size(0, -30)});
    infoWindow.open(map);
  
  });
}
